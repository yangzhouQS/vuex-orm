<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Database | Vuex ORM</title>
    <meta name="description" content="The Vuex plugin to enable Object-Relational Mapping access to the Vuex Store.">
    
    
    <link rel="preload" href="/vuex-orm/assets/css/0.styles.000274ea.css" as="style"><link rel="preload" href="/vuex-orm/assets/js/app.85b8a76f.js" as="script"><link rel="preload" href="/vuex-orm/assets/js/2.ef981a97.js" as="script"><link rel="preload" href="/vuex-orm/assets/js/7.69a455bd.js" as="script"><link rel="prefetch" href="/vuex-orm/assets/js/10.5e8660c4.js"><link rel="prefetch" href="/vuex-orm/assets/js/11.9c4a77f6.js"><link rel="prefetch" href="/vuex-orm/assets/js/12.e3b5f9a5.js"><link rel="prefetch" href="/vuex-orm/assets/js/13.987db1ec.js"><link rel="prefetch" href="/vuex-orm/assets/js/14.fcc58621.js"><link rel="prefetch" href="/vuex-orm/assets/js/15.36404af2.js"><link rel="prefetch" href="/vuex-orm/assets/js/16.6bf785c6.js"><link rel="prefetch" href="/vuex-orm/assets/js/17.1bbf4420.js"><link rel="prefetch" href="/vuex-orm/assets/js/18.f9e8c0c2.js"><link rel="prefetch" href="/vuex-orm/assets/js/19.9eb1e524.js"><link rel="prefetch" href="/vuex-orm/assets/js/20.4a9a85b7.js"><link rel="prefetch" href="/vuex-orm/assets/js/21.11b5662b.js"><link rel="prefetch" href="/vuex-orm/assets/js/22.fc810606.js"><link rel="prefetch" href="/vuex-orm/assets/js/23.66346f0d.js"><link rel="prefetch" href="/vuex-orm/assets/js/24.0b90f580.js"><link rel="prefetch" href="/vuex-orm/assets/js/25.0687c658.js"><link rel="prefetch" href="/vuex-orm/assets/js/26.818eb9de.js"><link rel="prefetch" href="/vuex-orm/assets/js/27.d5d24824.js"><link rel="prefetch" href="/vuex-orm/assets/js/3.03e790ce.js"><link rel="prefetch" href="/vuex-orm/assets/js/4.2119a9f7.js"><link rel="prefetch" href="/vuex-orm/assets/js/5.b191f5fc.js"><link rel="prefetch" href="/vuex-orm/assets/js/6.990d30b7.js"><link rel="prefetch" href="/vuex-orm/assets/js/8.cd358c55.js"><link rel="prefetch" href="/vuex-orm/assets/js/9.8696c6af.js">
    <link rel="stylesheet" href="/vuex-orm/assets/css/0.styles.000274ea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuex-orm/" class="home-link router-link-active"><!----> <span class="site-name">Vuex ORM</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/vuex-orm/api/container/container.html" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/vuex-orm/vuex-orm/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vuex-orm/vuex-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/vuex-orm/api/container/container.html" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/vuex-orm/vuex-orm/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vuex-orm/vuex-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Container</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/api/container/container.html" class="sidebar-link">Container</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Database</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/api/database/database.html" class="active sidebar-link">Database</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#instance-properties" class="sidebar-link">Instance Properties</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#store" class="sidebar-link">store</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#namespace" class="sidebar-link">namespace</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#entities" class="sidebar-link">entities</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#schema" class="sidebar-link">schema</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#instance-methods" class="sidebar-link">Instance Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#register" class="sidebar-link">register</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#start" class="sidebar-link">start</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#model" class="sidebar-link">model</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#models" class="sidebar-link">models</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#basemodel" class="sidebar-link">baseModel</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#module" class="sidebar-link">module</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/api/database/database.html#modules" class="sidebar-link">modules</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Model</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/api/model/model.html" class="sidebar-link">Model</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="database"><a href="#database" aria-hidden="true" class="header-anchor">#</a> Database</h1> <p>Database is the object that holds all Models and Modules that registered to the Vuex ORM. It is also responsible for generating the whole database relational schema from registered models. This schema is used to &quot;Normalize&quot; data before persisting to the Vuex Store.</p> <p>When using Vuex ORM, you would probably never need to use Database class after it's registered to the Vuex Store. But for those who are curious, we'll describe why object such as Database exists in the first place.</p> <p>In Vuex ORM, any Model could have any relationships with other Models. To resolve those relationships, we need to store all Models somewhere so that a Model can reference each other. That's where Database comes in to play. You can get any registered Model like this.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> database <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

database<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
</code></pre></div><p>You might wonder why do we need to store all Models in one place since the related Models are passed at Model when defining relationships like below.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Model <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuex-orm/core'</span>
<span class="token keyword">import</span> Post <span class="token keyword">from</span> <span class="token string">'./Post'</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> entity <span class="token operator">=</span> <span class="token string">'users'</span>

  <span class="token keyword">static</span> <span class="token function">fields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      posts<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasMany</span><span class="token punctuation">(</span>Post<span class="token punctuation">,</span> <span class="token string">'user_id'</span><span class="token punctuation">)</span>  <span class="token comment">// &lt;- Passing related Model.</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>So, can't we just resolve relationship directly from the Model? Unfortunately no, we can't. The biggest reason is that Vuex ORM is built on top of Vuex, and Vuex ORM is calling Vuex Getters/Actions/Mutations to interact with Vuex Store. In fact, you can call Vuex Actions directly to create or fetch data.</p> <p>Vuex Module doesn't have access to Model. It must resolve the Model from the entity name, which is <code>string</code>. When a user calls actions like <code>store.dispatch('entities/users/insert', { ... })</code>, we must somehow get User Model. Yes, Vuex ORM actions are getting Models from the Database.</p> <p>Finally, the created Database instance is registered to the global <a href="/api/container/container">Container </a> object so we have access to it from everywhere. So in your code, after installing Vuex ORM to Vuex, you can always access Database through Container like below.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Container <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuex-orm/core'</span>

<span class="token keyword">const</span> database <span class="token operator">=</span> Container<span class="token punctuation">.</span>database

<span class="token keyword">const</span> user <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="instance-properties"><a href="#instance-properties" aria-hidden="true" class="header-anchor">#</a> Instance Properties</h2> <h3 id="store"><a href="#store" aria-hidden="true" class="header-anchor">#</a> store</h3> <ul><li><p><strong><code>store!: Vuex.Store&lt;any&gt;</code></strong></p> <p>The Vuex Store instance.</p></li></ul> <h3 id="namespace"><a href="#namespace" aria-hidden="true" class="header-anchor">#</a> namespace</h3> <ul><li><p><strong><code>namespace!: string</code></strong></p> <p>The namespace of the Vuex Store Module where all entities are registered under. the default is <code>entities</code>.</p></li></ul> <h3 id="entities"><a href="#entities" aria-hidden="true" class="header-anchor">#</a> entities</h3> <ul><li><p><strong><code>entities: Entity[] = []</code></strong></p> <p>The list of entities registered to the Vuex Store. It contains models and modules with its name. The Entity interface looks like below.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Entity</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span>
  base<span class="token punctuation">:</span> <span class="token builtin">string</span>
  model<span class="token punctuation">:</span> <span class="token keyword">typeof</span> Model
  <span class="token keyword">module</span><span class="token punctuation">:</span> Vuex<span class="token punctuation">.</span>Module<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> schema</h3> <ul><li><p><strong><code>schemas: Schemas = {}</code></strong></p> <p>The database schema definition. This schema is going to be used when normalizing the data before persisting them to the Vuex Store. Schemas interface is a list of Normalizr schema.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Schemas</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>entity<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> NormalizrSchema<span class="token punctuation">.</span>Entity
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="instance-methods"><a href="#instance-methods" aria-hidden="true" class="header-anchor">#</a> Instance Methods</h2> <h3 id="register"><a href="#register" aria-hidden="true" class="header-anchor">#</a> register</h3> <ul><li><p><strong><code>register(model: typeof Model, module: Vuex.Module&lt;any, any&gt; = {}): void</code></strong></p> <p>Register a model and a module to Database.</p> <div class="language-js extra-class"><pre class="language-js"><code>database<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
</code></pre></div><p>You can omit registering a module.</p> <div class="language-js extra-class"><pre class="language-js"><code>database<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="start"><a href="#start" aria-hidden="true" class="header-anchor">#</a> start</h3> <ul><li><p><strong><code>start (store: Vuex.Store&lt;any&gt;, namespace: string): void</code></strong></p> <p>This method will generate Vuex Module and Normalizr schema tree from the registered Models. It will be called when adding Vuex ORM to Vuex as a plugin.</p></li></ul> <h3 id="model"><a href="#model" aria-hidden="true" class="header-anchor">#</a> model</h3> <ul><li><p><strong><code>model (name: string): typeof Model</code></strong></p> <p>Get the model of the given name from the entities list.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>

<span class="token comment">// User</span>
</code></pre></div></li></ul> <h3 id="models"><a href="#models" aria-hidden="true" class="header-anchor">#</a> models</h3> <ul><li><p><strong><code>models (): { [name: string]: typeof Model }</code></strong></p> <p>Get all models from the entities list. The result will be object with key being the entity name for the Model.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> models <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// { users: User, posts: Post }</span>
</code></pre></div></li></ul> <h3 id="basemodel"><a href="#basemodel" aria-hidden="true" class="header-anchor">#</a> baseModel</h3> <ul><li><p><strong><code>baseModel (name: string): typeof Model</code></strong></p> <p>Get the base model of the given name from the entities list. The base Model is only relevant when the model is inheriting another model to achieve Single Table inheritance feature.</p></li></ul> <h3 id="module"><a href="#module" aria-hidden="true" class="header-anchor">#</a> module</h3> <ul><li><p><strong><code>module (name: string): Vuex.Module&lt;any, any&gt;</code></strong></p> <p>Get the module of the given name from the entities list.</p></li></ul> <h3 id="modules"><a href="#modules" aria-hidden="true" class="header-anchor">#</a> modules</h3> <ul><li><p><strong><code>modules (): { [name: string]: Vuex.Module&lt;any, any&gt; }</code></strong></p> <p>Get all modules from the entities list. The result will be object with key being the entity name for the Module.</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuex-orm/api/container/container.html" class="prev">Container</a></span> <span class="next"><a href="/vuex-orm/api/model/model.html">Model</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuex-orm/assets/js/app.85b8a76f.js" defer></script><script src="/vuex-orm/assets/js/2.ef981a97.js" defer></script><script src="/vuex-orm/assets/js/7.69a455bd.js" defer></script>
  </body>
</html>
