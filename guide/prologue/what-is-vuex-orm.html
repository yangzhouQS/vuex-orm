<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>What is Vuex ORM? | Vuex ORM</title>
    <meta name="description" content="The Vuex plugin to enable Object-Relational Mapping access to the Vuex Store.">
    
    
    <link rel="preload" href="/vuex-orm/assets/css/0.styles.000274ea.css" as="style"><link rel="preload" href="/vuex-orm/assets/js/app.85b8a76f.js" as="script"><link rel="preload" href="/vuex-orm/assets/js/2.ef981a97.js" as="script"><link rel="preload" href="/vuex-orm/assets/js/25.0687c658.js" as="script"><link rel="prefetch" href="/vuex-orm/assets/js/10.5e8660c4.js"><link rel="prefetch" href="/vuex-orm/assets/js/11.9c4a77f6.js"><link rel="prefetch" href="/vuex-orm/assets/js/12.e3b5f9a5.js"><link rel="prefetch" href="/vuex-orm/assets/js/13.987db1ec.js"><link rel="prefetch" href="/vuex-orm/assets/js/14.fcc58621.js"><link rel="prefetch" href="/vuex-orm/assets/js/15.36404af2.js"><link rel="prefetch" href="/vuex-orm/assets/js/16.6bf785c6.js"><link rel="prefetch" href="/vuex-orm/assets/js/17.1bbf4420.js"><link rel="prefetch" href="/vuex-orm/assets/js/18.f9e8c0c2.js"><link rel="prefetch" href="/vuex-orm/assets/js/19.9eb1e524.js"><link rel="prefetch" href="/vuex-orm/assets/js/20.4a9a85b7.js"><link rel="prefetch" href="/vuex-orm/assets/js/21.11b5662b.js"><link rel="prefetch" href="/vuex-orm/assets/js/22.fc810606.js"><link rel="prefetch" href="/vuex-orm/assets/js/23.66346f0d.js"><link rel="prefetch" href="/vuex-orm/assets/js/24.0b90f580.js"><link rel="prefetch" href="/vuex-orm/assets/js/26.818eb9de.js"><link rel="prefetch" href="/vuex-orm/assets/js/27.d5d24824.js"><link rel="prefetch" href="/vuex-orm/assets/js/3.03e790ce.js"><link rel="prefetch" href="/vuex-orm/assets/js/4.2119a9f7.js"><link rel="prefetch" href="/vuex-orm/assets/js/5.b191f5fc.js"><link rel="prefetch" href="/vuex-orm/assets/js/6.990d30b7.js"><link rel="prefetch" href="/vuex-orm/assets/js/7.69a455bd.js"><link rel="prefetch" href="/vuex-orm/assets/js/8.cd358c55.js"><link rel="prefetch" href="/vuex-orm/assets/js/9.8696c6af.js">
    <link rel="stylesheet" href="/vuex-orm/assets/css/0.styles.000274ea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuex-orm/" class="home-link router-link-active"><!----> <span class="site-name">Vuex ORM</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><a href="/vuex-orm/api/container/container.html" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/vuex-orm/vuex-orm/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vuex-orm/vuex-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><a href="/vuex-orm/api/container/container.html" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/vuex-orm/vuex-orm/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vuex-orm/vuex-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Prologue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html" class="active sidebar-link">What is Vuex ORM?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html#issue-with-nested-relational-data" class="sidebar-link">Issue with Nested Relational Data</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html#normalizing-data" class="sidebar-link">Normalizing Data</a></li><li class="sidebar-sub-header"><a href="/vuex-orm/guide/prologue/what-is-vuex-orm.html#how-vuex-orm-handles-data" class="sidebar-link">How Vuex ORM Handles Data</a></li></ul></li><li><a href="/vuex-orm/guide/prologue/installation.html" class="sidebar-link">Installation</a></li><li><a href="/vuex-orm/guide/prologue/getting-started.html" class="sidebar-link">Getting Started</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Model</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/guide/model/defining-models.html" class="sidebar-link">Defining Models</a></li><li><a href="/vuex-orm/guide/model/relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/vuex-orm/guide/model/single-table-inheritance.html" class="sidebar-link">Single Table Inheritance</a></li><li><a href="/vuex-orm/guide/model/accessors-and-mutators.html" class="sidebar-link">Accessors &amp; Mutators</a></li><li><a href="/vuex-orm/guide/model/database-registration.html" class="sidebar-link">Database Registration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Data</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/guide/data/inserting-and-updating.html" class="sidebar-link">Inserting &amp; Updating</a></li><li><a href="/vuex-orm/guide/data/retrieving.html" class="sidebar-link">Retrieving</a></li><li><a href="/vuex-orm/guide/data/deleting.html" class="sidebar-link">Deleting</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Digging Deeper</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/guide/digging-deeper/vuex-module.html" class="sidebar-link">Vuex Module</a></li><li><a href="/vuex-orm/guide/digging-deeper/lifecycle-hooks.html" class="sidebar-link">Lifecycle Hooks</a></li><li><a href="/vuex-orm/guide/digging-deeper/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/vuex-orm/guide/digging-deeper/plugins.html" class="sidebar-link">Plugins</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Sponsors</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex-orm/guide/sponsors/awesome-folks.html" class="sidebar-link">Awesome Folks</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="what-is-vuex-orm"><a href="#what-is-vuex-orm" aria-hidden="true" class="header-anchor">#</a> What is Vuex ORM?</h1> <p>Vuex ORM is a plugin for Vuex to enable Object-Relational Mapping access to the Vuex Store. But why do we need ORM at the front-end?</p> <p>Many applications deal with data that is nested or relational in nature. For example, a blog editor could have many Posts, each Post could have many Comments, and both Posts and Comments would be written by a User. Using data in such kind of &quot;nested or relational&quot; structure can be very difficult for JavaScript applications, especially those using the single tree state management system such as <a href="https://vuex.vuejs.org" target="_blank" rel="noopener noreferrer">Vuex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="http://redux.js.org" target="_blank" rel="noopener noreferrer">Redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>To nicely handle such data, one approach is to split the nested data into separate modules and decouple them from each other. Simply put, it's kind of like treating a portion of your store as if it were a database, and keep that data in a normalized form.</p> <p><a href="http://redux.js.org/docs/recipes/reducers/NormalizingStateShape.html" target="_blank" rel="noopener noreferrer">This is an excellent article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that describes the difficulty of nested data structures. It also explains how to design normalized state, and Vuex ORM is heavily inspired by it.</p> <p>Note that in this documentation, we're borrowing many examples and texts from the article. I would like to credit <a href="https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape" target="_blank" rel="noopener noreferrer">Redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and the author of the section <a href="https://github.com/markerikson" target="_blank" rel="noopener noreferrer">Mark Erikson<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the beautiful piece of article.</p> <h2 id="issue-with-nested-relational-data"><a href="#issue-with-nested-relational-data" aria-hidden="true" class="header-anchor">#</a> Issue with Nested Relational Data</h2> <p>Let's say you fetch posts data from a backend server. In many cases, the response might look something like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    body<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    comments<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 2'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 2'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    body<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
    comments<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 3'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 1'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">:</span> <span class="token string">'.....'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 3'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// And so on...</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Notice that the structure of the data is a bit complex, and some of the data is repeated. It contains lots of <code>author</code> fields, which is a User. Some of them are the exact same User. If you save this data to the store as is, there will be a concern for several reasons:</p> <ul><li>When a piece of data is duplicated in several places, it becomes harder to make sure that it is updated appropriately.</li> <li>Nested data means that the corresponding logic to process this data has to be more nested and therefore more complex. In particular, trying to update a deeply nested field can become very ugly very fast.</li></ul> <p>Because of this, the recommended approach to managing nested or relational data in a store is to treat a portion of your store as if it were a database, and keep that data in a <em>normalized</em> form.</p> <h2 id="normalizing-data"><a href="#normalizing-data" aria-hidden="true" class="header-anchor">#</a> Normalizing Data</h2> <p>The basic concepts of normalizing data are:</p> <ul><li>Each type of data gets its own &quot;table&quot; in the state.</li> <li>Each &quot;data table&quot; should store the individual items in an object, with the IDs of the items as keys and the items themselves as the values.</li> <li>Any references to individual items should be done by the foreign keys.</li></ul> <p>As you may notice, it's pretty much the same as how ordinally relational database system manages the relations. We could do the same for our store.</p> <p>An example of a normalized state structure for the blog posts example above might look like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  posts<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  comments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">4</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  users<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 3'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This state structure is much flatter overall. Compared to the original nested format, this is an improvement in several ways:</p> <ul><li>Because each item is only defined in one place, we don't have to try to make changes in multiple places if that item is updated.</li> <li>The logic that interacts with the data doesn't have to deal with deep levels of nesting, so it will probably be much simpler.</li> <li>The logic for retrieving or updating a given item is now fairly simple and consistent. Given an item's type and its id, we can directly look it up in a couple of simple steps, without having to dig through other objects to find it.</li></ul> <p>Note that a normalized state structure generally implies that more components are connected and each component is responsible for looking up its own data, as opposed to a few connected components looking up large amounts of data and passing all that data downwards. As it turns out, having connected parent components simply pass item ids to connected children is a good pattern for optimizing UI performance as well, so keeping state normalized plays a key role in improving performance.</p> <p>However, it's still hard to actually organize such normalized data. You must write some kind of logic to &quot;normalize&quot; the input data, and also you must write logic to retrieve the data with also resolving any necessary relationships in mind. Here is where Vuex ORM comes in.</p> <h2 id="how-vuex-orm-handles-data"><a href="#how-vuex-orm-handles-data" aria-hidden="true" class="header-anchor">#</a> How Vuex ORM Handles Data</h2> <p>Vuex ORM will manage both creating (normalizing) and also retrieving data through fluent and sufficient API.</p> <p>Let's say we want to store above blog posts data. You'll first create a representing &quot;Model&quot; for Post, Comment, and User.</p> <p>The Model would look like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> entity <span class="token operator">=</span> <span class="token string">'posts'</span>

  <span class="token keyword">static</span> <span class="token function">fields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      user_id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      comments<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasMany</span><span class="token punctuation">(</span>Comment<span class="token punctuation">,</span> <span class="token string">'post_id'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Comment</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> entity <span class="token operator">=</span> <span class="token string">'comments'</span>

  <span class="token keyword">static</span> <span class="token function">fields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      user_id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      post_id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      comment<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      author<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> <span class="token string">'user_id'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> entity <span class="token operator">=</span> <span class="token string">'users'</span>

  <span class="token keyword">static</span> <span class="token function">fields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then you may simply call Model's <code>insert</code> method to insert data.</p> <div class="language-js extra-class"><pre class="language-js"><code>Post<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> posts <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>With this simple method, Vuex ORM will automatically normalize the given data and save them inside Vuex Store State as following structure.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  entities<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    posts<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    comments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      data<span class="token punctuation">:</span> <span class="token punctuation">{</span>        
        <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">4</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">5</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> post_id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string">'.....'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    users<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'User 3'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Notice that Vuex ORM will even generate any missing foreign keys (in this case <code>user_id</code>) during the normalization process.</p> <p>Now, you can fetch these data using Model's fluent query builder just like ordinally ORM library.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Fetch all posts.</span>
<span class="token keyword">const</span> posts <span class="token operator">=</span> Post<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
  [
    { id: 1, body: '.....' },
    { id: 2, body: '.....' }
  ]
*/</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Fetch all posts with its relation.</span>
<span class="token keyword">const</span> posts <span class="token operator">=</span> Post<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
  [
    {
      id: 1,
      body: '.....',
      author: {
        id: 1,
        name: 'User 1'
      }
    },
    {
      id: 2,
      body: '.....',
      author: {
        id: 2,
        name: 'User 2'
      }
    }
  ]
*/</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Fetch data matching specific condition.</span>
<span class="token keyword">const</span> posts <span class="token operator">=</span> Post<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
  [
    {
      id: 1,
      body: '.....',
      author: {
        id: 1,
        username: 'user1',
        name: 'User 1'
      }
    }
  ]
*/</span>
</code></pre></div><p>Cool, isn't it? Are you ready to start using Vuex ORM? <a href="/vuex-orm/guide/prologue/getting-started.html">Let's get started</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/vuex-orm/guide/prologue/installation.html">Installation</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuex-orm/assets/js/app.85b8a76f.js" defer></script><script src="/vuex-orm/assets/js/2.ef981a97.js" defer></script><script src="/vuex-orm/assets/js/25.0687c658.js" defer></script>
  </body>
</html>
